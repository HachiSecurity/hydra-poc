<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Tree.MerklePatricia</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">merkle-patricia-tree-0.1.0: An implementation of the Merkle Patricia Tree algorithm.</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Tree.MerklePatricia</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Types</a></li><li><a href="#g:2">Constructing</a></li><li><a href="#g:3">Analyzing</a></li><li><a href="#g:4">Proof</a><ul><li><a href="#g:5">Constructing</a></li><li><a href="#g:6">Using</a></li></ul></li><li><a href="#g:7">Debugging</a></li><li><a href="#g:8">Re-Exports</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>An implementation of a Merkle-Patricia tree, with additions and deletions
 of elements from root hashes.</p><p>Note that this module is not meant to be used as a handful data-structures
 for classic operations; Those operations are better done with a <code>Map</code> or a
 <code>HashMap</code> containers. A <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code> can however be leveraged to
 produce proofs which sizes are logarithmic in the size of the tree, and which
 can be verified using only a root hash. This makes is feasible to embed
 verifiable operations on an existing tree with only tiny proofs.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:MerklePatriciaTree">MerklePatriciaTree</a> alg a</li><li class="src short"><span class="keyword">data</span> <a href="#t:Proof">Proof</a> alg</li><li class="src short"><a href="#v:fromList">fromList</a> :: <span class="keyword">forall</span> alg a. (<a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg, <a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> a) =&gt; [(ByteString, a)] -&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a</li><li class="src short"><a href="#v:toList">toList</a> :: <span class="keyword">forall</span> alg a. <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; [(ByteString, a)]</li><li class="src short"><a href="#v:root">root</a> :: <span class="keyword">forall</span> alg a. <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Digest alg</li><li class="src short"><a href="#v:null">null</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Bool</li><li class="src short"><a href="#v:size">size</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Int</li><li class="src short"><a href="#v:depth">depth</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Int</li><li class="src short"><a href="#v:mkProof">mkProof</a> :: ByteString -&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Maybe (<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg)</li><li class="src short"><a href="#v:member">member</a> :: <span class="keyword">forall</span> alg a. (<a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> a, <a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg) =&gt; (ByteString, a) -&gt; Digest alg -&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; Bool</li><li class="src short"><a href="#v:add">add</a> :: <span class="keyword">forall</span> alg a. (<a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> a, <a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg) =&gt; (ByteString, a) -&gt; Digest alg -&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; Maybe (Digest alg)</li><li class="src short"><a href="#v:delete">delete</a> :: <span class="keyword">forall</span> alg a. (<a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> a, <a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg) =&gt; (ByteString, a) -&gt; Digest alg -&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; Maybe (Digest alg)</li><li class="src short"><a href="#v:proofSize">proofSize</a> :: <span class="keyword">forall</span> alg. <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; Int</li><li class="src short"><a href="#v:pretty">pretty</a> :: <span class="keyword">forall</span> alg a. Show a =&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; String</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Types</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:MerklePatriciaTree" class="def">MerklePatriciaTree</a> alg a <a href="#t:MerklePatriciaTree" class="selflink">#</a></p><div class="doc"><p>An opaque <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code>, parameterized by a hash algorithm and a
 type for its values.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:MerklePatriciaTree">Instances</h4><details id="i:MerklePatriciaTree" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MerklePatriciaTree:Eq:1"></span> <a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg =&gt; Eq (<a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a)</span> <a href="#t:MerklePatriciaTree" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MerklePatriciaTree:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Tree-MerklePatricia.html">Data.Tree.MerklePatricia</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:MerklePatriciaTree:Show:2"></span> Show a =&gt; Show (<a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a)</span> <a href="#t:MerklePatriciaTree" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:MerklePatriciaTree:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Tree-MerklePatricia.html">Data.Tree.MerklePatricia</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a] -&gt; ShowS</p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Proof" class="def">Proof</a> alg <a href="#t:Proof" class="selflink">#</a></p><div class="doc"><p>An opaque <code><a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a></code> which can be used to prove membership or atomic
 operations such as <code><a href="Data-Tree-MerklePatricia.html#v:add" title="Data.Tree.MerklePatricia">add</a></code> or <code><a href="Data-Tree-MerklePatricia.html#v:delete" title="Data.Tree.MerklePatricia">delete</a></code></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Proof">Instances</h4><details id="i:Proof" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Proof:Eq:1"></span> Eq (<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg)</span> <a href="#t:Proof" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Proof:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Tree-MerklePatricia.html">Data.Tree.MerklePatricia</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; Bool</p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; Bool</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Proof:Show:2"></span> Show (<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg)</span> <a href="#t:Proof" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Proof:Show:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Tree-MerklePatricia.html">Data.Tree.MerklePatricia</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: Int -&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; ShowS</p><p class="src"><a href="#v:show">show</a> :: <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; String</p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg] -&gt; ShowS</p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Proof:Serialise:3"></span> <a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg =&gt; <a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> (<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg)</span> <a href="#t:Proof" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Proof:Serialise:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Data-Tree-MerklePatricia.html">Data.Tree.MerklePatricia</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:encode">encode</a> :: <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; Encoding</p><p class="src"><a href="#v:decode">decode</a> :: Decoder s (<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg)</p><p class="src"><a href="#v:encodeList">encodeList</a> :: [<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg] -&gt; Encoding</p><p class="src"><a href="#v:decodeList">decodeList</a> :: Decoder s [<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg]</p></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h1>Constructing</h1></a><div class="top"><p class="src"><a id="v:fromList" class="def">fromList</a> :: <span class="keyword">forall</span> alg a. (<a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg, <a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> a) =&gt; [(ByteString, a)] -&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a <a href="#v:fromList" class="selflink">#</a></p><div class="doc"><p>Construct a Merkle-Patricia Tree from a list of (key, value) pairs.</p><p>This operation is <strong>expensive</strong> for it computes intermediate hashes of each
 nodes and leaves of the tree.</p><p><strong>properties:</strong></p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;xs. toList (fromList xs) == xs
</code></strong></pre></div></div><div class="top"><p class="src"><a id="v:toList" class="def">toList</a> :: <span class="keyword">forall</span> alg a. <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; [(ByteString, a)] <a href="#v:toList" class="selflink">#</a></p><div class="doc"><p>Convert a Merkle-Patricia Tree into a list of (key, value) pairs.</p><p><strong>properties:</strong></p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;xs. toList (fromList xs) == xs
</code></strong></pre></div></div><a href="#g:3" id="g:3"><h1>Analyzing</h1></a><div class="top"><p class="src"><a id="v:root" class="def">root</a> :: <span class="keyword">forall</span> alg a. <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Digest alg <a href="#v:root" class="selflink">#</a></p><div class="doc"><p>Access the root hash of the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code>. Two trees with the same
 root hash are equal.</p></div></div><div class="top"><p class="src"><a id="v:null" class="def">null</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Bool <a href="#v:null" class="selflink">#</a></p><div class="doc"><p>True if the given <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code> is empty.</p><p><strong>properties:</strong></p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt. (size mpt == 0) == (null mpt)
</code></strong>True
</pre></div></div><div class="top"><p class="src"><a id="v:size" class="def">size</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Int <a href="#v:size" class="selflink">#</a></p><div class="doc"><p>Count the number of values stored in the tree (that is, number of non-empty
 leaves). Note that this does not necessarily correspond to the number of nodes
 in the tree.</p><p>We have however the following property:</p><p><strong>properties:</strong></p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;xs. size (fromList xs) == length xs
</code></strong>True
</pre></div></div><div class="top"><p class="src"><a id="v:depth" class="def">depth</a> :: <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; Int <a href="#v:depth" class="selflink">#</a></p><div class="doc"><p>Count the maximum number of levels in the tree.</p></div></div><a href="#g:4" id="g:4"><h1>Proof</h1></a><a href="#g:5" id="g:5"><h2>Constructing</h2></a><div class="top"><p class="src"><a id="v:mkProof" class="def">mkProof</a> <a href="#v:mkProof" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: ByteString</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a</td><td class="doc"><p>A key pointing to one element in the tree</p></td></tr><tr><td class="src">-&gt; Maybe (<a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg)</td><td class="doc"><p>The target tree</p></td></tr></table></div><div class="doc"><p>Construct a proof for a given <code>key</code> of the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code>. Returns
 <code>Nothing</code> if the key does not exists. The proof is compact and does not
 information embedded in the element itself. This means that, the
 corresponding (key, value) is necessary for any use of the proof.</p></div></div><a href="#g:6" id="g:6"><h2>Using</h2></a><div class="top"><p class="src"><a id="v:member" class="def">member</a> <a href="#v:member" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> alg a. (<a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> a, <a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (ByteString, a)</td><td class="doc"><p>The (key, value) to check</p></td></tr><tr><td class="src">-&gt; Digest alg</td><td class="doc"><p>The root of the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code> with (supposedly) the (key, value)</p></td></tr><tr><td class="src">-&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg</td><td class="doc"><p>A proof for the (key, value) in the corresponding <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code></p></td></tr><tr><td class="src">-&gt; Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Check whether an element exists in the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code>.</p><p><strong>properties:</strong></p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt. member (k, v) (root mpt) &lt;$&gt; mkProof k mpt
</code></strong>Just True
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt, &#8707;k' / k &#8800; k'. member (k', v) (root mpt) &lt;$&gt; mkProof k mpt
</code></strong>Just False
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt, &#8707;v' / v &#8800; v'. member (k, v') (root mpt) &lt;$&gt; mkProof k mpt
</code></strong>Just False
</pre></div></div><div class="top"><p class="src"><a id="v:add" class="def">add</a> <a href="#v:add" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> alg a. (<a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> a, <a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (ByteString, a)</td><td class="doc"><p>The (key, value) to add.</p></td></tr><tr><td class="src">-&gt; Digest alg</td><td class="doc"><p>The root of the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code> <strong>without</strong> the (key, value)</p></td></tr><tr><td class="src">-&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg</td><td class="doc"><p>A proof for the (key, value) in the resulting <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code></p></td></tr><tr><td class="src">-&gt; Maybe (Digest alg)</td><td class="doc"><p>Returns, the root of the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code> <strong>with</strong> the (key, value)
 added, or <code>Nothing</code> if the proof is invalid for the given root.</p></td></tr></table></div><div class="doc"><p>Check whether an element exists in the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code>, yielding the
 root hash of the new tree.</p><p><strong>properties:</strong></p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt, add (k, v) (root (mpt \ (k,v))) &lt;$&gt; mkProof k mpt
</code></strong>Just (root mpt)
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt, &#8707;v' / v &#8800; v'. add (k, v') (root (mpt \ (k,v))) &lt;$&gt; mkProof k mpt
</code></strong>Nothing
</pre></div></div><div class="top"><p class="src"><a id="v:delete" class="def">delete</a> <a href="#v:delete" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> alg a. (<a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a> a, <a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a> alg)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; (ByteString, a)</td><td class="doc"><p>The (key, value) to delete.</p></td></tr><tr><td class="src">-&gt; Digest alg</td><td class="doc"><p>The root of the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code> <strong>with</strong> the (key, value)</p></td></tr><tr><td class="src">-&gt; <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg</td><td class="doc"><p>A proof for the (key, value) in the original <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code></p></td></tr><tr><td class="src">-&gt; Maybe (Digest alg)</td><td class="doc"><p>Returns, the root of the <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code> <strong>without</strong> the (key, value),
 or <code>Nothing</code> if the (key, value) is not present in the original tree.</p></td></tr></table></div><div class="doc"><p>Delete an element from a <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code>, yielding the root hash of
 the new tree.</p><p><strong>properties:</strong></p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt, delete (k, v) (root mpt) &lt;$&gt; mkProof k mpt
</code></strong>Just (root (mpt \ (k, v)))
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt, &#8707;k' / k &#8800; k'. delete (k', v) (root mpt) &lt;$&gt; mkProof k mpt
</code></strong>Nothing
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt, &#8707;v' / v &#8800; v'. delete (k, v') (root mpt) &lt;$&gt; mkProof k mpt
</code></strong>Nothing
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>&#8704;mpt, &#8704;(k, v) &#8712; mpt, let Just p = mkProof k mpt. add (k, v) &lt;$&gt; delete (k, v) (root mpt) p &lt;*&gt; pure p
</code></strong>Just (root mpt)
</pre></div></div><a href="#g:7" id="g:7"><h1>Debugging</h1></a><div class="top"><p class="src"><a id="v:proofSize" class="def">proofSize</a> :: <span class="keyword">forall</span> alg. <a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a> alg -&gt; Int <a href="#v:proofSize" class="selflink">#</a></p><div class="doc"><p>Size of a <code><a href="Data-Tree-MerklePatricia.html#t:Proof" title="Data.Tree.MerklePatricia">Proof</a></code>. Returns the number of hashes needed for the proof.</p></div></div><div class="top"><p class="src"><a id="v:pretty" class="def">pretty</a> :: <span class="keyword">forall</span> alg a. Show a =&gt; <a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a> alg a -&gt; String <a href="#v:pretty" class="selflink">#</a></p><div class="doc"><p>Pretty-print a <code><a href="Data-Tree-MerklePatricia.html#t:MerklePatriciaTree" title="Data.Tree.MerklePatricia">MerklePatriciaTree</a></code> in ascii, such that levels are aligned
 horizontally (one identation-level per level in the tree), and prefixes are
 positioned such that they are visually easy to follow. The outputs look like
 this:</p><pre>*--- Root hash
|                      *---- Values at the leaves
|                      |
*-&gt; #3801f:            |
    #ee41c: \0         |
    #16944:  \0      vvvvv
    #9d288:   \001100 &#8614; ()
    #d0bd1:   \100110 &#8614; ()
    #38e90:  \1000110 &#8614; ()
    #978d8: \1
    #5ac65:  \0
    #6f2de:   \00
    #4fe20:     \0110 &#8614; ()
    #d1489:     \1100 &#8614; ()
    #d0bd1:   \100110 &#8614; ()
    #22882:  \100
    #4fe20:   ^ \0110 &#8614; ()
    #d1489:   | \1100 &#8614; ()
     ^^^^^    |   ^^^
       |      |    |
       |      |    *--- Leaf or node's prefix
       |      |
       |      *---- Branch bit
       |
       |
       |
       *----- Nodes / Leaves' hashes
</pre><p>Useful for debugging / reasonning.</p></div></div><a href="#g:8" id="g:8"><h1>Re-Exports</h1></a><div class="doc"><ul><li><code><a href="Data-Tree-MerklePatricia.html#t:Serialise" title="Data.Tree.MerklePatricia">Serialise</a></code></li></ul></div><div class="doc"><ul><li><code><a href="Data-Tree-MerklePatricia.html#t:HashAlgorithm" title="Data.Tree.MerklePatricia">HashAlgorithm</a></code></li></ul></div><div class="doc"><ul><li><code><a href="Data-Tree-MerklePatricia.html#t:Blake2b_160" title="Data.Tree.MerklePatricia">Blake2b_160</a></code></li></ul></div><div class="doc"><ul><li><code><a href="Data-Tree-MerklePatricia.html#t:Blake2b_224" title="Data.Tree.MerklePatricia">Blake2b_224</a></code></li></ul></div><div class="doc"><ul><li><code><a href="Data-Tree-MerklePatricia.html#t:Blake2b_256" title="Data.Tree.MerklePatricia">Blake2b_256</a></code></li></ul></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>